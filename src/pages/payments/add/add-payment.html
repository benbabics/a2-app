<ion-header>
  <ion-toolbar>
    <ion-buttons *wexIfPlatformAndroid left>
      <button ion-button icon-only (click)="cancel()">
        <ion-icon name="arrow-back"></ion-icon>
      </button>
    </ion-buttons>

    <ion-title>{{ isEditingPayment ? CONSTANTS.EDIT.title : CONSTANTS.CREATE.title }}</ion-title>

    <ion-buttons *wexIfPlatformIos right>
      <button ion-button (click)="cancel()">
        <ion-icon name="close"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item-group class="ios-item-indent">
    <!-- Bank Account -->
    <ion-list-header>{{ CONSTANTS.LABELS.bankAccount }}</ion-list-header>

    <button ion-item *ngIf="paymentBankAccount" (click)="updateBankAccount()">
      <ion-label>
        <h2>
          {{paymentBankAccount.details.name}}
          (...{{paymentBankAccount.details.lastFourDigits}})
        </h2>
        <p>{{paymentBankAccount.details.name}}</p>
      </ion-label>
      <ion-icon item-right ios="ios-arrow-forward"></ion-icon>
    </button>

    <!-- Amount -->
    <ion-list-header>{{ CONSTANTS.LABELS.paymentAmount }}</ion-list-header>

    <button ion-item *ngIf="payment.amount" (click)="updateAmount()">
      <ion-label>
        <h2>{{payment.amount.value | wexCurrency}}</h2>
        <p>{{ payment.amount.label }}</p>
        <p *ngIf="displayAmountWarning" class="item-warning">{{ CONSTANTS.LABELS.warningAmount }}</p>
      </ion-label>
      <ion-icon item-right ios="ios-arrow-forward"></ion-icon>
    </button>

    <!-- Payment Date -->
    <ion-list-header>{{ CONSTANTS.LABELS.paymentDate }}</ion-list-header>

    <button ion-item (click)="updateDate()">
      <ion-label>
        <h2>{{paymentDate | wexDate:true:'MMMM D'}}</h2>
        <p *ngIf="paymentService.hasMinimumPaymentDue">{{ CONSTANTS.LABELS.due }} {{paymentDueDate | wexDate:true:'MMMM D'}}</p>
        <p *ngIf="displayDueDateWarning" class="item-warning">{{ CONSTANTS.LABELS.warningPaymentDate }}</p>
      </ion-label>
      <ion-icon item-right ios="ios-arrow-forward"></ion-icon>
      <calendar #calendar [(date)]="this.payment.date"  [minDate]="minPaymentDate" [maxDate]="maxPaymentDate"></calendar>
    </button>
  </ion-item-group>

  <ion-list id="action-list" padding>
    <button ion-button block (click)="handleSchedulePayment()">
      <action-indicator large [when]="isLoading">{{ CONSTANTS.LABELS.schedulePayment }}</action-indicator>
    </button>

    <p>{{ CONSTANTS.LABELS.instructionalText }}</p>
  </ion-list>
</ion-content>
