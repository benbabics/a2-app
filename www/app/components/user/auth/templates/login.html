<ion-view view-title="{{ ::vm.config.title }}" hide-nav-bar="true" class="page-login" wex-back-state="app.exit">
    <div class="alerts-wrapper">
        <wex-notification-bar priority="0"
                              ng-if="vm.timedOut"
                              text="{{::vm.config.sessionTimeOut}}">
        </wex-notification-bar>

        <wex-notification-bar class="bar-error"
                              priority="1"
                              id="errorMessage"
                              ng-if="vm.globalError"
                              text="{{vm.globalError}}">
        </wex-notification-bar>
    </div>

    <ion-content scroll="false">
        <div class="title-bar">
            <img src="img/pages/login/logo.png"/>
        </div>

        <form novalidate name="vm.userLoginForm" ng-submit="vm.userLoginForm.$valid && vm.logInUser(vm.setupFingerprintAuth)">
            <div class="list">
                <div class="item item-input item-stacked-label">
                    <span ng-click="vm.verifyFingerprintRemoval('user.username')">
                        <input ng-model="vm.maskableUsername"
                               ng-model-options="{getterSetter: true}"
                               ng-blur="vm.usernameIsFocused = false"
                               ng-focus="vm.usernameIsFocused = true"
                               ng-disabled="vm.fingerprintProfileAvailable"
                               name="userName"
                               type="text"
                               required
                               autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                               placeholder="{{ ::vm.config.userName.label }}"
                               wex-max-length="{{ ::vm.config.userName.maxLength }}">
                    </span>
                    <i class="ion-close-circled" ng-show="vm.usernameIsFocused" ng-click="vm.onClearInput('userName')"></i>
                </div>

                <div class="item item-input item-stacked-label">
                    <input ng-model="vm.user.password"
                           ng-blur="vm.passwordIsFocused = false"
                           ng-focus="vm.passwordIsFocused = true"
                           name="password"
                           type="password"
                           required
                           autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                           placeholder="{{ ::vm.config.password.label }}"
                           wex-max-length="{{ ::vm.config.password.maxLength }}">
                    <i class="ion-close-circled" ng-show="vm.passwordIsFocused" ng-click="vm.onClearInput('password')"></i>
                </div>
            </div>

            <div class="row-no-padding login-controls">
                <ion-checkbox ng-model="vm.rememberMeToggle" ng-click="vm.verifyFingerprintRemoval('rememberMe')" class="justify-left">
                    <span ng-bind-html="::vm.config.rememberMe.label"></span>
                </ion-checkbox>

                <ion-checkbox ng-if="vm.fingerprintAuthAvailable && !vm.fingerprintProfileAvailable"
                        ng-disabled="!vm.rememberMe"
                        ng-model="vm.setupFingerprintAuth"
                        class="justify-right">
                    <span ng-bind-html="::vm.getFingerprintDisabledLabel()"></span>
                </ion-checkbox>
                <div class="fingerprint-indicator icon-fingerprint justify-right"
                        ng-if="vm.fingerprintProfileAvailable"
                        ng-click="vm.logInUser(true)">
                </div>
            </div>

            <div class="actions">
                <wex-required-submit text="{{ ::vm.config.submitButton }}"></wex-required-submit>
            </div>
        </form>

        <div class="padding align_center">
            <online-enrollment-flow>{{ ::vm.config.enrollment.label }}</online-enrollment-flow>
        </div>
    </ion-content>
</ion-view>
